import{j as d,r as f,R as V}from"./tree-api-CQLLDcUU.js";import{O as w,t as P,l as G,T as A,P as B}from"../pipeline-console-view-bundle.js";import"./symbols-Cb69PKiS.js";import"./stages-C8vAc7L5.js";var L={amp:"&",gt:">",lt:"<",nbsp:"Â ",quot:'"'},O=/^#[xX]([A-Fa-f0-9]+)$/,F=/^#([0-9]+)$/,$=/^([A-Za-z0-9]+)$/,z=(function(){function s(i){this.named=i}return s.prototype.parse=function(i){if(i){var t=i.match(O);if(t)return String.fromCharCode(parseInt(t[1],16));if(t=i.match(F),t)return String.fromCharCode(parseInt(t[1],10));if(t=i.match($),t)return this.named[t[1]]||"&"+t[1]+";"}},s})(),R=/[\t\n\f ]/,U=/[A-Za-z]/,Q=/\r\n?/g;function u(s){return R.test(s)}function C(s){return U.test(s)}function j(s){return s.replace(Q,`
`)}var _=(function(){function s(i,t,o){o===void 0&&(o="precompile"),this.delegate=i,this.entityParser=t,this.mode=o,this.state="beforeData",this.line=-1,this.column=-1,this.input="",this.index=-1,this.tagNameBuffer="",this.states={beforeData:function(){var e=this.peek();if(e==="<"&&!this.isIgnoredEndTag())this.transitionTo("tagOpen"),this.markTagStart(),this.consume();else{if(this.mode==="precompile"&&e===`
`){var n=this.tagNameBuffer.toLowerCase();(n==="pre"||n==="textarea")&&this.consume()}this.transitionTo("data"),this.delegate.beginData()}},data:function(){var e=this.peek(),n=this.tagNameBuffer;e==="<"&&!this.isIgnoredEndTag()?(this.delegate.finishData(),this.transitionTo("tagOpen"),this.markTagStart(),this.consume()):e==="&"&&n!=="script"&&n!=="style"?(this.consume(),this.delegate.appendToData(this.consumeCharRef()||"&")):(this.consume(),this.delegate.appendToData(e))},tagOpen:function(){var e=this.consume();e==="!"?this.transitionTo("markupDeclarationOpen"):e==="/"?this.transitionTo("endTagOpen"):(e==="@"||e===":"||C(e))&&(this.transitionTo("tagName"),this.tagNameBuffer="",this.delegate.beginStartTag(),this.appendToTagName(e))},markupDeclarationOpen:function(){var e=this.consume();if(e==="-"&&this.peek()==="-")this.consume(),this.transitionTo("commentStart"),this.delegate.beginComment();else{var n=e.toUpperCase()+this.input.substring(this.index,this.index+6).toUpperCase();n==="DOCTYPE"&&(this.consume(),this.consume(),this.consume(),this.consume(),this.consume(),this.consume(),this.transitionTo("doctype"),this.delegate.beginDoctype&&this.delegate.beginDoctype())}},doctype:function(){var e=this.consume();u(e)&&this.transitionTo("beforeDoctypeName")},beforeDoctypeName:function(){var e=this.consume();u(e)||(this.transitionTo("doctypeName"),this.delegate.appendToDoctypeName&&this.delegate.appendToDoctypeName(e.toLowerCase()))},doctypeName:function(){var e=this.consume();u(e)?this.transitionTo("afterDoctypeName"):e===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypeName&&this.delegate.appendToDoctypeName(e.toLowerCase())},afterDoctypeName:function(){var e=this.consume();if(!u(e))if(e===">")this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData");else{var n=e.toUpperCase()+this.input.substring(this.index,this.index+5).toUpperCase(),a=n.toUpperCase()==="PUBLIC",r=n.toUpperCase()==="SYSTEM";(a||r)&&(this.consume(),this.consume(),this.consume(),this.consume(),this.consume(),this.consume()),a?this.transitionTo("afterDoctypePublicKeyword"):r&&this.transitionTo("afterDoctypeSystemKeyword")}},afterDoctypePublicKeyword:function(){var e=this.peek();u(e)?(this.transitionTo("beforeDoctypePublicIdentifier"),this.consume()):e==='"'?(this.transitionTo("doctypePublicIdentifierDoubleQuoted"),this.consume()):e==="'"?(this.transitionTo("doctypePublicIdentifierSingleQuoted"),this.consume()):e===">"&&(this.consume(),this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData"))},doctypePublicIdentifierDoubleQuoted:function(){var e=this.consume();e==='"'?this.transitionTo("afterDoctypePublicIdentifier"):e===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypePublicIdentifier&&this.delegate.appendToDoctypePublicIdentifier(e)},doctypePublicIdentifierSingleQuoted:function(){var e=this.consume();e==="'"?this.transitionTo("afterDoctypePublicIdentifier"):e===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypePublicIdentifier&&this.delegate.appendToDoctypePublicIdentifier(e)},afterDoctypePublicIdentifier:function(){var e=this.consume();u(e)?this.transitionTo("betweenDoctypePublicAndSystemIdentifiers"):e===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):e==='"'?this.transitionTo("doctypeSystemIdentifierDoubleQuoted"):e==="'"&&this.transitionTo("doctypeSystemIdentifierSingleQuoted")},betweenDoctypePublicAndSystemIdentifiers:function(){var e=this.consume();u(e)||(e===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):e==='"'?this.transitionTo("doctypeSystemIdentifierDoubleQuoted"):e==="'"&&this.transitionTo("doctypeSystemIdentifierSingleQuoted"))},doctypeSystemIdentifierDoubleQuoted:function(){var e=this.consume();e==='"'?this.transitionTo("afterDoctypeSystemIdentifier"):e===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypeSystemIdentifier&&this.delegate.appendToDoctypeSystemIdentifier(e)},doctypeSystemIdentifierSingleQuoted:function(){var e=this.consume();e==="'"?this.transitionTo("afterDoctypeSystemIdentifier"):e===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypeSystemIdentifier&&this.delegate.appendToDoctypeSystemIdentifier(e)},afterDoctypeSystemIdentifier:function(){var e=this.consume();u(e)||e===">"&&(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData"))},commentStart:function(){var e=this.consume();e==="-"&&this.peek()==="-"?this.transitionTo("commentStartDash"):e===">"?(this.delegate.finishComment(),this.transitionTo("beforeData")):(this.delegate.appendToCommentData(e),this.transitionTo("comment"))},commentStartDash:function(){var e=this.consume();e==="-"?this.transitionTo("commentEnd"):e===">"?(this.delegate.finishComment(),this.transitionTo("beforeData")):(this.delegate.appendToCommentData("-"),this.transitionTo("comment"))},comment:function(){var e=this.consume();e==="-"?this.transitionTo("commentEndDash"):this.delegate.appendToCommentData(e)},commentEndDash:function(){var e=this.consume();e==="-"&&this.peek()==="-"?this.delegate.appendToCommentData(e):e==="-"?this.transitionTo("commentEnd"):(this.delegate.appendToCommentData("-"+e),this.transitionTo("comment"))},commentEnd:function(){var e=this.consume();e===">"?(this.delegate.finishComment(),this.transitionTo("beforeData")):(this.delegate.appendToCommentData("--"+e),this.transitionTo("comment"))},tagName:function(){var e=this.consume();u(e)?this.transitionTo("beforeAttributeName"):e==="/"?this.transitionTo("selfClosingStartTag"):e===">"?(this.delegate.finishTag(),this.transitionTo("beforeData")):this.appendToTagName(e)},endTagName:function(){var e=this.consume();u(e)?(this.transitionTo("beforeAttributeName"),this.tagNameBuffer=""):e==="/"?(this.transitionTo("selfClosingStartTag"),this.tagNameBuffer=""):e===">"?(this.delegate.finishTag(),this.transitionTo("beforeData"),this.tagNameBuffer=""):this.appendToTagName(e)},beforeAttributeName:function(){var e=this.peek();if(u(e)){this.consume();return}else e==="/"?(this.transitionTo("selfClosingStartTag"),this.consume()):e===">"?(this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):e==="="?(this.delegate.reportSyntaxError("attribute name cannot start with equals sign"),this.transitionTo("attributeName"),this.delegate.beginAttribute(),this.consume(),this.delegate.appendToAttributeName(e)):(this.transitionTo("attributeName"),this.delegate.beginAttribute())},attributeName:function(){var e=this.peek();u(e)?(this.transitionTo("afterAttributeName"),this.consume()):e==="/"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("selfClosingStartTag")):e==="="?(this.transitionTo("beforeAttributeValue"),this.consume()):e===">"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):e==='"'||e==="'"||e==="<"?(this.delegate.reportSyntaxError(e+" is not a valid character within attribute names"),this.consume(),this.delegate.appendToAttributeName(e)):(this.consume(),this.delegate.appendToAttributeName(e))},afterAttributeName:function(){var e=this.peek();if(u(e)){this.consume();return}else e==="/"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("selfClosingStartTag")):e==="="?(this.consume(),this.transitionTo("beforeAttributeValue")):e===">"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.transitionTo("attributeName"),this.delegate.beginAttribute(),this.consume(),this.delegate.appendToAttributeName(e))},beforeAttributeValue:function(){var e=this.peek();u(e)?this.consume():e==='"'?(this.transitionTo("attributeValueDoubleQuoted"),this.delegate.beginAttributeValue(!0),this.consume()):e==="'"?(this.transitionTo("attributeValueSingleQuoted"),this.delegate.beginAttributeValue(!0),this.consume()):e===">"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):(this.transitionTo("attributeValueUnquoted"),this.delegate.beginAttributeValue(!1),this.consume(),this.delegate.appendToAttributeValue(e))},attributeValueDoubleQuoted:function(){var e=this.consume();e==='"'?(this.delegate.finishAttributeValue(),this.transitionTo("afterAttributeValueQuoted")):e==="&"?this.delegate.appendToAttributeValue(this.consumeCharRef()||"&"):this.delegate.appendToAttributeValue(e)},attributeValueSingleQuoted:function(){var e=this.consume();e==="'"?(this.delegate.finishAttributeValue(),this.transitionTo("afterAttributeValueQuoted")):e==="&"?this.delegate.appendToAttributeValue(this.consumeCharRef()||"&"):this.delegate.appendToAttributeValue(e)},attributeValueUnquoted:function(){var e=this.peek();u(e)?(this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("beforeAttributeName")):e==="/"?(this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("selfClosingStartTag")):e==="&"?(this.consume(),this.delegate.appendToAttributeValue(this.consumeCharRef()||"&")):e===">"?(this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):(this.consume(),this.delegate.appendToAttributeValue(e))},afterAttributeValueQuoted:function(){var e=this.peek();u(e)?(this.consume(),this.transitionTo("beforeAttributeName")):e==="/"?(this.consume(),this.transitionTo("selfClosingStartTag")):e===">"?(this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):this.transitionTo("beforeAttributeName")},selfClosingStartTag:function(){var e=this.peek();e===">"?(this.consume(),this.delegate.markTagAsSelfClosing(),this.delegate.finishTag(),this.transitionTo("beforeData")):this.transitionTo("beforeAttributeName")},endTagOpen:function(){var e=this.consume();(e==="@"||e===":"||C(e))&&(this.transitionTo("endTagName"),this.tagNameBuffer="",this.delegate.beginEndTag(),this.appendToTagName(e))}},this.reset()}return s.prototype.reset=function(){this.transitionTo("beforeData"),this.input="",this.tagNameBuffer="",this.index=0,this.line=1,this.column=0,this.delegate.reset()},s.prototype.transitionTo=function(i){this.state=i},s.prototype.tokenize=function(i){this.reset(),this.tokenizePart(i),this.tokenizeEOF()},s.prototype.tokenizePart=function(i){for(this.input+=j(i);this.index<this.input.length;){var t=this.states[this.state];if(t!==void 0)t.call(this);else throw new Error("unhandled state "+this.state)}},s.prototype.tokenizeEOF=function(){this.flushData()},s.prototype.flushData=function(){this.state==="data"&&(this.delegate.finishData(),this.transitionTo("beforeData"))},s.prototype.peek=function(){return this.input.charAt(this.index)},s.prototype.consume=function(){var i=this.peek();return this.index++,i===`
`?(this.line++,this.column=0):this.column++,i},s.prototype.consumeCharRef=function(){var i=this.input.indexOf(";",this.index);if(i!==-1){var t=this.input.slice(this.index,i),o=this.entityParser.parse(t);if(o){for(var e=t.length;e;)this.consume(),e--;return this.consume(),o}}},s.prototype.markTagStart=function(){this.delegate.tagOpen()},s.prototype.appendToTagName=function(i){this.tagNameBuffer+=i,this.delegate.appendToTagName(i)},s.prototype.isIgnoredEndTag=function(){var i=this.tagNameBuffer;return i==="title"&&this.input.substring(this.index,this.index+8)!=="</title>"||i==="style"&&this.input.substring(this.index,this.index+8)!=="</style>"||i==="script"&&this.input.substring(this.index,this.index+9)!=="<\/script>"},s})(),H=(function(){function s(i,t){t===void 0&&(t={}),this.options=t,this.token=null,this.startLine=1,this.startColumn=0,this.tokens=[],this.tokenizer=new _(this,i,t.mode),this._currentAttribute=void 0}return s.prototype.tokenize=function(i){return this.tokens=[],this.tokenizer.tokenize(i),this.tokens},s.prototype.tokenizePart=function(i){return this.tokens=[],this.tokenizer.tokenizePart(i),this.tokens},s.prototype.tokenizeEOF=function(){return this.tokens=[],this.tokenizer.tokenizeEOF(),this.tokens[0]},s.prototype.reset=function(){this.token=null,this.startLine=1,this.startColumn=0},s.prototype.current=function(){var i=this.token;if(i===null)throw new Error("token was unexpectedly null");if(arguments.length===0)return i;for(var t=0;t<arguments.length;t++)if(i.type===arguments[t])return i;throw new Error("token type was unexpectedly "+i.type)},s.prototype.push=function(i){this.token=i,this.tokens.push(i)},s.prototype.currentAttribute=function(){return this._currentAttribute},s.prototype.addLocInfo=function(){this.options.loc&&(this.current().loc={start:{line:this.startLine,column:this.startColumn},end:{line:this.tokenizer.line,column:this.tokenizer.column}}),this.startLine=this.tokenizer.line,this.startColumn=this.tokenizer.column},s.prototype.beginDoctype=function(){this.push({type:"Doctype",name:""})},s.prototype.appendToDoctypeName=function(i){this.current("Doctype").name+=i},s.prototype.appendToDoctypePublicIdentifier=function(i){var t=this.current("Doctype");t.publicIdentifier===void 0?t.publicIdentifier=i:t.publicIdentifier+=i},s.prototype.appendToDoctypeSystemIdentifier=function(i){var t=this.current("Doctype");t.systemIdentifier===void 0?t.systemIdentifier=i:t.systemIdentifier+=i},s.prototype.endDoctype=function(){this.addLocInfo()},s.prototype.beginData=function(){this.push({type:"Chars",chars:""})},s.prototype.appendToData=function(i){this.current("Chars").chars+=i},s.prototype.finishData=function(){this.addLocInfo()},s.prototype.beginComment=function(){this.push({type:"Comment",chars:""})},s.prototype.appendToCommentData=function(i){this.current("Comment").chars+=i},s.prototype.finishComment=function(){this.addLocInfo()},s.prototype.tagOpen=function(){},s.prototype.beginStartTag=function(){this.push({type:"StartTag",tagName:"",attributes:[],selfClosing:!1})},s.prototype.beginEndTag=function(){this.push({type:"EndTag",tagName:""})},s.prototype.finishTag=function(){this.addLocInfo()},s.prototype.markTagAsSelfClosing=function(){this.current("StartTag").selfClosing=!0},s.prototype.appendToTagName=function(i){this.current("StartTag","EndTag").tagName+=i},s.prototype.beginAttribute=function(){this._currentAttribute=["","",!1]},s.prototype.appendToAttributeName=function(i){this.currentAttribute()[0]+=i},s.prototype.beginAttributeValue=function(i){this.currentAttribute()[2]=i},s.prototype.appendToAttributeValue=function(i){this.currentAttribute()[1]+=i},s.prototype.finishAttributeValue=function(){this.current("StartTag").attributes.push(this._currentAttribute)},s.prototype.reportSyntaxError=function(i){this.current().syntaxError=i},s})();function M(s,i){var t=new H(new z(L),i);return t.tokenize(s)}const N="LinkifyResult",g="StartTag",I="EndTag",T="Chars",q="Comment",K="Doctype";function W(s,i={}){const t=M(s),o=[],e=[],n=new w(i,Z);for(let a=0;a<t.length;a++){const r=t[a];if(r.type===g){o.push(r);const h=r.tagName.toUpperCase();if(!(h==="A"||n.ignoreTags.indexOf(h)>=0))continue;let b=o.length;X(h,t,++a,o),a+=o.length-b-1}else if(r.type!==T)o.push(r);else{const h=Y(r.chars,n);o.push.apply(o,h)}}for(let a=0;a<o.length;a++){const r=o[a];switch(r.type){case N:e.push(r.rendered);break;case g:{let h="<"+r.tagName;r.attributes.length>0&&(h+=" "+ee(r.attributes).join(" ")),r.selfClosing&&(h+=" /"),h+=">",e.push(h);break}case I:e.push(`</${r.tagName}>`);break;case T:e.push(y(r.chars));break;case q:e.push(`<!--${y(r.chars)}-->`);break;case K:{let h=`<!DOCTYPE ${r.name}`;r.publicIdentifier&&(h+=` PUBLIC "${r.publicIdentifier}"`),r.systemIdentifier&&(h+=` "${r.systemIdentifier}"`),h+=">",e.push(h);break}}}return e.join("")}function Y(s,i){const t=P(s),o=[];for(let e=0;e<t.length;e++){const n=t[e];n.t==="nl"&&i.get("nl2br")?o.push({type:g,tagName:"br",attributes:[],selfClosing:!0}):!n.isLink||!i.check(n)?o.push({type:T,chars:n.toString()}):o.push({type:N,rendered:i.render(n)})}return o}function X(s,i,t,o){let e=1;for(;t<i.length&&e>0;){let n=i[t];n.type===g&&n.tagName.toUpperCase()===s?e++:n.type===I&&n.tagName.toUpperCase()===s&&e--,o.push(n),t++}return o}function Z({tagName:s,attributes:i,content:t}){return`<${s} ${J(i)}>${y(t)}</${s}>`}function y(s){return s.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function E(s){return s.replace(/"/g,"&quot;")}function J(s){const i=[];for(const t in s){const o=s[t]+"";i.push(`${t}="${E(o)}"`)}return i.join(" ")}function ee(s){const i=[];for(let t=0;t<s.length;t++){const o=s[t][0],e=s[t][1]+"";i.push(`${o}="${E(e)}"`)}return i}function te(s){const i=/^\u001b\[([;0-9]*)m$/,t={isSelectGraphicRendition:!1,escapeCode:s},o=i.exec(s);if(o){t.isSelectGraphicRendition=!0,t.setFG=!1,t.setBG=!1,t.resetFG=!1,t.resetBG=!1;const e=(o[1]||"").split(";").map(n=>parseInt(n||"0"));for(const n of e)n>=30&&n<=37?t.setFG=n-30:n>=40&&n<=47?t.setBG=n-40:n>=90&&n<=97?t.setFG=n-90+8:n>=100&&n<=107?t.setBG=n-100+8:n===1?t.setBold=!0:n===2?t.setFaint=!0:n===22?(t.setBold=!1,t.setFaint=!1):n===3?t.setItalic=!0:n===23?t.setItalic=!1:n===4?t.setUnderline=!0:n===24?t.setUnderline=!1:n===9?t.setStrikeThrough=!0:n===29?t.setStrikeThrough=!1:((n===39||n===0)&&(t.resetFG=!0,t.setFG=!1),(n===49||n===0)&&(t.resetBG=!0,t.setBG=!1),n===0&&(t.setBold=!1,t.setFaint=!1,t.setItalic=!1,t.setUnderline=!1,t.setStrikeThrough=!1))}return t}function ie(s){if(typeof s!="string")return[];const i=s.length;if(i===0)return[];let t=0,o=0,e=0,n=0,a=0;const r=[];for(;t<i&&(o=s.indexOf("\x1B",t),o!==-1);){if(n=s.indexOf("<!--",t),a=s.indexOf("-->",n),a!==-1&&(a+=3),o>n&&o<a){t=a;continue}o>t&&(r.push(s.substring(t,o)),t=o),o+=2;let h=s.charCodeAt(o);for(;o<i&&(h<64||h>126);)o++,h=s.charCodeAt(o);const p=te(s.substring(t,o+1));r.push(p),t=o+1,e=t}return e<i&&r.push(s.substr(e)),r}function se(s,i){const t=[];let o={setFG:!1,setBG:!1,setBold:!1,setFaint:!1,setItalic:!1,setUnderline:!1,setStrikeThrough:!1};for(let e=0;e<s.length;e++){const n=s[e];if(typeof n=="string")if(!o.setFG&&!o.setBG&&!o.setBold&&!o.setFaint&&!o.setItalic&&!o.setUnderline&&!o.setStrikeThrough)t.push(d.jsx("div",{dangerouslySetInnerHTML:{__html:n}},`${i}-${e}`));else{const a=[];typeof o.setFG=="number"&&a.push(`ansi-fg-${o.setFG}`),typeof o.setBG=="number"&&a.push(`ansi-bg-${o.setBG}`),o.setBold&&a.push("ansi-bold"),o.setFaint&&a.push("ansi-faint"),o.setItalic&&a.push("ansi-italic"),o.setUnderline&&a.push("ansi-underline"),o.setStrikeThrough&&a.push("ansi-strikethrough"),t.push(d.jsx("span",{className:a.join(" "),children:n}))}else if(n.isSelectGraphicRendition){const a={...o};n.resetFG&&(a.setFG=!1),n.resetBG&&(a.setBG=!1),typeof n.setFG=="number"&&(a.setFG=n.setFG),typeof n.setBG=="number"&&(a.setBG=n.setBG),n.setBold!==void 0&&(a.setBold=n.setBold),n.setFaint!==void 0&&(a.setFaint=n.setFaint),n.setItalic!==void 0&&(a.setItalic=n.setItalic),n.setUnderline!==void 0&&(a.setUnderline=n.setUnderline),n.setStrikeThrough!==void 0&&(a.setStrikeThrough=n.setStrikeThrough),o=a}}return t}const ne=f.memo(function(i){const t=`?start-byte=${i.startByte}&selected-node=${i.stepId}`,o=`log-${i.stepId}-${i.lineNumber}`;return d.jsx("pre",{style:{background:"none",border:"none"},className:"console-output-line",children:d.jsxs("div",{className:"console-output-line",children:[d.jsx("a",{className:"console-line-number",id:o,href:`${t}#${o}`,onClick:()=>{i.stopTailingLogs(),history.replaceState({},"",t)},style:{width:Math.max(9*String(i.lineNumber).length,30)+"px"},children:i.lineNumber}),d.jsx("div",{className:"console-text",children:se(ie(W(i.content,G)),o)})]})})});function ue({tailLogs:s,stopTailingLogs:i,scrollToTail:t,stepId:o,stepState:e,logBuffer:n,updateLogBufferIfChanged:a,fetchLogText:r,fetchExceptionText:h}){const p=f.useRef(null),[b,x]=f.useState(!0);f.useEffect(()=>{e===V.failure&&a(h(o))},[o,e,h,a]),f.useLayoutEffect(()=>{p.current&&t(o,p.current)},[s,n.lines,t,o]),f.useEffect(()=>{if(n.stopTailing||!p.current)return;const l=new IntersectionObserver(c=>{for(const m of c)x(m.isIntersecting)});return l.observe(p.current),()=>l.disconnect()},[n.stopTailing]);const D=b&&!n.stopTailing;f.useEffect(()=>{if(!D)return;a(r(o,A));const l=window.setInterval(()=>{a(r(o,A))},B);return()=>clearInterval(l)},[D,r,o,a]);const[k,v]=f.useState(window.location.hash.startsWith("#log-"));return f.useEffect(()=>{if(!k)return;let l=window.location.hash;if(!l.startsWith("#log-"))return;let[c,m]=l.slice(5).split("-");if(m&&c!==o){v(!1);return}m||(m=c,c=o,l=`#log-${c}-${m}`,location.hash=l);const S=document.getElementById(l.slice(1));S&&(S.scrollIntoView({behavior:"smooth",block:"center"}),location.hash="",location.hash=l,v(!1))},[k,o,n.lines]),d.jsx("div",{role:"log",ref:p,style:{scrollMarginBlockEnd:"var(--section-padding)"},children:n.lines.map((l,c)=>d.jsx(ne,{lineNumber:String(c),content:l,stepId:o,startByte:n.startByte,stopTailingLogs:i},c))})}export{ue as default};
//# sourceMappingURL=ConsoleLogStream-9v-iZC6Y.js.map
